<gc-modal [isOpen]="isOpen" [title]="'Welcome back'" [maxWidth]="'sm'" (close)="onClose()">
  <form (ngSubmit)="onSubmit()" #loginForm="ngForm" class="login-form">
    <!-- Success Message -->
    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage && !successMessage" class="error-message">
      {{ errorMessage }}
      <button
        *ngIf="showResendLink"
        type="button"
        class="resend-link"
        (click)="onResendVerification()"
      >
        Resend verification email
      </button>
    </div>

    <!-- Email Field -->
    <div class="form-group">
      <label for="login-email" class="form-label">Email</label>
      <input
        type="email"
        id="login-email"
        name="email"
        [(ngModel)]="formData.email"
        class="form-input"
        placeholder="you@example.com"
        required
        autocomplete="email"
      />
    </div>

    <!-- Password Field -->
    <div class="form-group">
      <label for="login-password" class="form-label">Password</label>
      <input
        type="password"
        id="login-password"
        name="password"
        [(ngModel)]="formData.password"
        class="form-input"
        placeholder="Enter your password"
        required
        autocomplete="current-password"
      />
    </div>

    <!-- Remember Me & Forgot Password -->
    <div class="form-options">
      <label class="checkbox-label">
        <input
          type="checkbox"
          [(ngModel)]="formData.rememberMe"
          name="rememberMe"
          class="checkbox-input"
        />
        <span>Remember me</span>
      </label>
      <button
        type="button"
        class="forgot-password"
        (click)="onForgotPassword()"
      >
        Forgot password?
      </button>
    </div>

    <!-- Submit Button -->
    <gc-button
      type="submit"
      variant="primary"
      size="lg"
      [fullWidth]="true"
      [disabled]="isLoading || (loginForm.invalid ?? false)"
    >
      {{ isLoading ? 'Signing in...' : 'Sign in' }}
    </gc-button>

    <!-- Sign Up Link -->
    <p class="signup-link">
      Don't have an account?
      <button type="button" class="link-button" (click)="onSwitchToSignup()">
        Sign up
      </button>
    </p>
  </form>
</gc-modal>
