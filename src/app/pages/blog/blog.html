<div class="blog-page">
  <!-- Hero Section -->
  <section class="blog-hero">
    <div class="container">
      <h1>GadgetCloud News & Updates</h1>
      <p>Stay up to date with the latest news, features, and insights from GadgetCloud</p>
    </div>
  </section>

  <!-- Filters Section -->
  <section class="blog-filters">
    <div class="container">
      <div class="filters-grid">
        <!-- Search -->
        <div class="filter-item search-filter">
          <input
            type="text"
            placeholder="Search articles..."
            [(ngModel)]="filters.search"
            (input)="onSearchChange(filters.search || '')"
            class="search-input"
          />
        </div>

        <!-- Category Filter -->
        <div class="filter-item">
          <select
            [(ngModel)]="filters.category"
            (change)="onCategoryChange(filters.category || '')"
            class="filter-select"
          >
            <option value="">All Categories</option>
            <option *ngFor="let cat of (categories$ | async)" [value]="cat.slug">
              {{ cat.name }} ({{ cat.count }})
            </option>
          </select>
        </div>

        <!-- Sort -->
        <div class="filter-item">
          <select
            [(ngModel)]="filters.sort"
            (change)="onSortChange(filters.sort)"
            class="filter-select"
          >
            <option value="latest">Latest First</option>
            <option value="oldest">Oldest First</option>
            <option value="popular">Most Popular</option>
          </select>
        </div>

        <!-- Clear Filters -->
        <div class="filter-item">
          <gc-button
            variant="ghost"
            size="sm"
            (click)="clearFilters()"
            *ngIf="hasFilters"
          >
            Clear Filters
          </gc-button>
        </div>
      </div>

      <!-- Active Tags (if tag filter applied) -->
      <div class="active-filters" *ngIf="filters.tag">
        <span class="filter-label">Tag:</span>
        <span class="tag-badge">
          {{ filters.tag }}
          <button (click)="onTagChange('')" class="remove-tag" aria-label="Remove tag filter">Ã—</button>
        </span>
      </div>
    </div>
  </section>

  <!-- Posts Grid -->
  <section class="blog-posts">
    <div class="container">
      <ng-container *ngIf="loading$ | async as loading; else contentLoaded">
        <!-- Loading State -->
        <div class="loading-state">
          <div class="spinner"></div>
          <p>Loading posts...</p>
        </div>
      </ng-container>

      <ng-template #contentLoaded>
        <ng-container *ngIf="posts$ | async as posts">
          <!-- Empty State -->
          <div *ngIf="posts.length === 0" class="empty-state">
            <div class="empty-icon">ðŸ“°</div>
            <h2>No posts found</h2>
            <p *ngIf="hasFilters">No posts match your search criteria. Try adjusting your filters.</p>
            <p *ngIf="!hasFilters">Check back soon for new articles and updates!</p>
            <gc-button variant="primary" (click)="clearFilters()" *ngIf="hasFilters">
              Clear Filters
            </gc-button>
          </div>

          <!-- Posts Grid -->
          <div *ngIf="posts.length > 0" class="posts-grid">
            <gc-blog-card
              *ngFor="let post of posts"
              [post]="post"
              (cardClick)="viewPost($event)"
            ></gc-blog-card>
          </div>

          <!-- Pagination -->
          <gc-pagination
            *ngIf="posts.length > 0 && totalPages > 1"
            [currentPage]="currentPage"
            [totalPages]="totalPages"
            [total]="(total$ | async) || 0"
            (pageChange)="onPageChange($event)"
          ></gc-pagination>
        </ng-container>
      </ng-template>
    </div>
  </section>
</div>
