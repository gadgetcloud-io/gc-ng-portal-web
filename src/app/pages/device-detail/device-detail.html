<div class="device-detail-page">
  <!-- Success/Error Popovers -->
  <div class="popover-container">
    <div *ngIf="updateSuccess" class="popover popover-success">
      <div class="popover-icon">‚úì</div>
      <div class="popover-message">{{ updateSuccess }}</div>
    </div>

    <div *ngIf="updateError" class="popover popover-error">
      <div class="popover-icon">‚úï</div>
      <div class="popover-message">{{ updateError }}</div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p class="loading-text">Loading gadget details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-container">
    <div class="error-icon">‚ö†Ô∏è</div>
    <h2 class="error-title">Failed to Load Gadget</h2>
    <p class="error-message">{{ error }}</p>
    <a routerLink="/my-gadgets" class="btn-back">Back to My Gadgets</a>
  </div>

  <!-- Device Content -->
  <div *ngIf="!loading && !error && device" class="device-content">
    <!-- Hero Section -->
    <div class="hero-section">
      <div class="gadget-image">
        <div class="image-placeholder">
          <span class="gadget-icon">{{ getDeviceIcon() }}</span>
        </div>
      </div>

      <div class="gadget-info">
        <h1 class="gadget-name">{{ device.name }}</h1>
        <div class="gadget-price" *ngIf="device.purchasePrice">
          {{ formatCurrency(device.purchasePrice) }}
        </div>
        <div class="gadget-meta">
          <span class="meta-item">{{ device.manufacturer || 'Unknown' }}</span>
          <span class="meta-separator">‚Ä¢</span>
          <span class="meta-item">{{ device.model || 'Unknown Model' }}</span>
        </div>
        <div class="status-badge" [ngClass]="getStatusClass()" *ngIf="device.status">
          {{ getStatusText() }}
        </div>

        <div class="hero-actions">
          <button class="btn-delete" (click)="deleteDevice()">
            <span class="btn-icon">üóëÔ∏è</span>
            Delete Gadget
          </button>
        </div>
      </div>
    </div>

    <!-- Tab Navigation -->
    <gc-tabs
      [tabs]="tabs"
      [activeTabId]="activeTabId"
      [variant]="'underline'"
      (tabChange)="onTabChange($event)">
    </gc-tabs>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Details Tab -->
      <app-details-tab
        *ngIf="activeTabId === 'details'"
        [device]="device"
        [fieldConfigs]="fieldConfigs"
        [loadingFieldConfigs]="loadingFieldConfigs"
        [isUpdating]="isUpdating"
        (fieldUpdate)="onFieldUpdate($event)">
      </app-details-tab>

      <!-- Warranty Tab -->
      <app-warranty-tab
        *ngIf="activeTabId === 'warranty'"
        [device]="device"
        [fieldConfigs]="fieldConfigs"
        [loadingFieldConfigs]="loadingFieldConfigs"
        [isUpdating]="isUpdating"
        (fieldUpdate)="onFieldUpdate($event)">
      </app-warranty-tab>

      <!-- Documents Tab -->
      <app-documents-tab
        *ngIf="activeTabId === 'documents'"
        [deviceId]="deviceId"
        [deviceName]="device.name">
      </app-documents-tab>

      <!-- Notes Tab -->
      <app-notes-tab
        *ngIf="activeTabId === 'notes'"
        [device]="device"
        [fieldConfigs]="fieldConfigs"
        [isUpdating]="isUpdating"
        (fieldUpdate)="onFieldUpdate($event)">
      </app-notes-tab>
    </div>
  </div>
</div>
