<!-- Progress Indicator (sticky at top, shows after first interaction) -->
<app-progress-indicator></app-progress-indicator>

<!-- Problem Immersion Section - Dark, chaotic, relatable pain (hidden after adding gadgets) -->
<section class="problem-immersion" *ngIf="getDemoState().devices.length === 0">
  <div class="container">
    <div class="problem-content" appScrollReveal>
      <div class="problem-visual">
        <span class="floating-receipt">ğŸ“„</span>
        <span class="floating-receipt">ğŸ§¾</span>
        <span class="floating-receipt">ğŸ“‹</span>
        <span class="floating-warranty">âš ï¸</span>
      </div>
      <h2 class="problem-title">"Where's that receipt again?"</h2>
      <p class="problem-description">
        Shoebox full of receipts. Expired warranties you forgot about. Manuals lost forever.
        Sound familiar? There's a better way.
      </p>
    </div>
  </div>
</section>

<!-- Hero Section (Reimagined) - hidden after adding gadgets -->
<section class="hero" *ngIf="getDemoState().devices.length === 0">
  <div class="container">
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">
          Gadget care,
          <span class="title-highlight">delightfully simple</span>
        </h1>
        <p class="hero-subtitle">
          Track warranties. Store receipts. Never lose a gadget manual again.
          All your tech, beautifully organized in one happy place.
        </p>
        <div class="hero-badge">
          <span class="badge-text">âœ¨ Try it yourself, no signup required</span>
        </div>
        <div class="hero-cta">
          <button class="cta-button cta-primary" (click)="scrollToDemo()">
            Try the Interactive Demo
          </button>
          <button class="cta-button cta-secondary" (click)="scrollToFeatures()">
            See Features
          </button>
        </div>
        <div class="hero-stats">
          <div class="stat">
            <div class="stat-number">10K+</div>
            <div class="stat-label">Happy Users</div>
          </div>
          <div class="stat">
            <div class="stat-number">50K+</div>
            <div class="stat-label">Gadgets Tracked</div>
          </div>
          <div class="stat">
            <div class="stat-number">99%</div>
            <div class="stat-label">Warranty Saved</div>
          </div>
        </div>
      </div>
      <div class="hero-illustration">
        <!-- Lemonade-style outline illustration with varied hover animations -->
        <svg viewBox="0 0 400 400" class="illustration">
          <!-- Phone device -->
          <g class="device-phone hover-bounce">
            <rect x="150" y="80" width="100" height="180" rx="12" fill="none" stroke="#0080C0" stroke-width="3"/>
            <rect x="160" y="90" width="80" height="140" rx="4" fill="none" stroke="#2AD5BD" stroke-width="2" stroke-dasharray="4 4"/>
            <circle cx="200" cy="245" r="8" fill="none" stroke="#0080C0" stroke-width="2"/>
            <!-- Screen elements -->
            <line x1="170" y1="100" x2="230" y2="100" stroke="#2A76E4" stroke-width="2" stroke-linecap="round"/>
            <line x1="170" y1="115" x2="220" y2="115" stroke="#2A76E4" stroke-width="2" stroke-linecap="round"/>
            <circle cx="175" cy="140" r="4" fill="#27C7B0"/>
            <circle cx="195" cy="140" r="4" fill="#0080C0"/>
            <circle cx="215" cy="140" r="4" fill="#2A76E4"/>
          </g>
          <!-- Laptop device -->
          <g class="device-laptop hover-pulse">
            <rect x="60" y="180" width="120" height="80" rx="6" fill="none" stroke="#2A76E4" stroke-width="3"/>
            <rect x="70" y="190" width="100" height="60" rx="3" fill="none" stroke="#27C7B0" stroke-width="2"/>
            <rect x="50" y="260" width="140" height="8" rx="2" fill="none" stroke="#2A76E4" stroke-width="3"/>
            <!-- Checkmark -->
            <polyline points="95,215 105,225 125,205" fill="none" stroke="#0080C0" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          </g>
          <!-- Watch device -->
          <g class="device-watch hover-rotate">
            <rect x="260" y="220" width="60" height="70" rx="8" fill="none" stroke="#27C7B0" stroke-width="3"/>
            <rect x="268" y="228" width="44" height="40" rx="4" fill="none" stroke="#0080C0" stroke-width="2"/>
            <line x1="275" y1="235" x2="295" y2="235" stroke="#2A76E4" stroke-width="2" stroke-linecap="round"/>
            <line x1="275" y1="245" x2="305" y2="245" stroke="#2A76E4" stroke-width="2" stroke-linecap="round"/>
            <rect x="270" y="210" width="40" height="10" rx="2" fill="none" stroke="#27C7B0" stroke-width="2"/>
            <rect x="270" y="290" width="40" height="10" rx="2" fill="none" stroke="#27C7B0" stroke-width="2"/>
          </g>
          <!-- Floating icons -->
          <g class="floating-icons">
            <g class="hover-shake">
              <circle cx="320" cy="100" r="20" fill="none" stroke="#0080C0" stroke-width="2"/>
              <polyline points="315,100 320,105 330,95" fill="none" stroke="#0080C0" stroke-width="2" stroke-linecap="round"/>
            </g>
            <g class="hover-float">
              <circle cx="80" cy="120" r="15" fill="none" stroke="#2A76E4" stroke-width="2"/>
              <text x="80" y="127" text-anchor="middle" fill="#2A76E4" font-size="20">âš¡</text>
            </g>
            <g class="hover-slide">
              <circle cx="340" cy="280" r="18" fill="none" stroke="#27C7B0" stroke-width="2"/>
              <text x="340" y="288" text-anchor="middle" fill="#27C7B0" font-size="20">ğŸ¯</text>
            </g>
          </g>
        </svg>
      </div>
    </div>
    <!-- Scroll indicator -->
    <div class="scroll-indicator" (click)="scrollToDemo()">
      <span class="scroll-text">Scroll to Explore</span>
      <span class="scroll-arrow">â†“</span>
    </div>
  </div>
</section>

<!-- Section connector -->
<div class="section-connector"></div>

<!-- Interactive Demo Zone - PLACEHOLDER -->
<section class="interactive-demo-section" id="demo">
  <div class="container">
    <div class="section-header" appScrollReveal>
      <h2 class="section-title">Add Your First Gadget</h2>
      <p class="section-subtitle">Enter device details or upload a photo. See how easy it isâ€”no signup required.</p>
    </div>

    <!-- Interactive Demo Component -->
    <app-interactive-demo></app-interactive-demo>
  </div>
</section>

<!-- Section connector -->
<div class="section-connector"></div>

<!-- Before/After Value - Warranty Calculator -->
<section class="value-demonstration">
  <div class="container">
    <div class="section-header" appScrollReveal>
      <h2 class="section-title">See Your Potential Savings</h2>
      <p class="section-subtitle">Calculate warranty value and compare before/after organization.</p>
    </div>
    <div class="value-content">
      <!-- Warranty Calculator Component -->
      <app-warranty-calculator></app-warranty-calculator>

      <!-- Before/After Slider Component -->
      <app-before-after-slider></app-before-after-slider>
    </div>
  </div>
</section>

<!-- Section connector -->
<div class="section-connector"></div>

<!-- Features Section -->
<section class="features" id="features">
  <div class="container">
    <div class="section-header" appScrollReveal>
      <h2 class="section-title">Explore All Features</h2>
      <p class="section-subtitle">Everything you need to manage your gadgetsâ€”warranties, receipts, manuals, and more.</p>
    </div>

    <div class="feature-grid">
      <div class="feature-card" *ngFor="let feature of features; let i = index" appScrollReveal [revealDelay]="i * 100">
        <div class="feature-icon" [innerHTML]="feature.icon"></div>
        <h3 class="feature-title">{{ feature.title }}</h3>
        <p class="feature-description">{{ feature.description }}</p>
      </div>
    </div>
  </div>
</section>

<!-- Section connector -->
<div class="section-connector"></div>

<!-- How It Works Section (Simplified to 2 steps) -->
<section class="how-it-works">
  <div class="container">
    <div class="section-header" appScrollReveal>
      <h2 class="section-title">Start Your Journey</h2>
      <p class="section-subtitle">Just two simple steps to never lose track of your gadgets again.</p>
    </div>

    <div class="steps">
      <div class="step" appScrollReveal>
        <div class="step-number">1</div>
        <div class="step-content">
          <h3 class="step-title">Add Your Gadgets</h3>
          <p class="step-description">Snap a photo or enter details manually. Takes less than 30 seconds per device. (You just tried this!)</p>
        </div>
        <div class="step-illustration">
          <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <rect x="25" y="20" width="50" height="60" rx="5" fill="none" stroke="#0080C0" stroke-width="2"/>
            <circle cx="50" cy="70" r="3" fill="#2AD5BD"/>
            <text x="50" y="55" text-anchor="middle" font-size="30">+</text>
          </svg>
        </div>
      </div>

      <div class="step" appScrollReveal [revealDelay]="150">
        <div class="step-number">2</div>
        <div class="step-content">
          <h3 class="step-title">Let AI Track Everything</h3>
          <p class="step-description">We'll extract details from photos, track warranties, and remind you before they expire. Sit back and relax.</p>
        </div>
        <div class="step-illustration">
          <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="30" fill="none" stroke="#27C7B0" stroke-width="2"/>
            <path d="M50 50 L50 30 M50 50 L65 60" fill="none" stroke="#0080C0" stroke-width="2"/>
          </svg>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Social Proof Section -->
<section class="social-proof">
  <div class="container">
    <div class="proof-content">
      <div class="proof-stats">
        <div class="big-stat" appScrollReveal>
          <div class="big-stat-number">4.9</div>
          <div class="big-stat-stars">â˜…â˜…â˜…â˜…â˜…</div>
          <div class="big-stat-label">Average rating from 2,500+ reviews</div>
        </div>
      </div>
      <div class="testimonials">
        <div class="testimonial" *ngFor="let testimonial of testimonials; let i = index" appScrollReveal [revealDelay]="i * 150">
          <div class="testimonial-content">"{{ testimonial.text }}"</div>
          <div class="testimonial-author">
            <div class="author-avatar">{{ testimonial.initials }}</div>
            <div class="author-info">
              <div class="author-name">{{ testimonial.name }}</div>
              <div class="author-title">{{ testimonial.title }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Posts Section -->
<section class="featured-posts-section" *ngIf="featuredPosts.length > 0">
  <div class="container">
    <div class="section-header" appScrollReveal>
      <h2>What's New?</h2>
      <p>Latest updates and news from GadgetCloud</p>
    </div>

    <div class="posts-grid">
      <gc-blog-card
        *ngFor="let post of featuredPosts; let i = index"
        [post]="post"
        [featured]="true"
        (cardClick)="viewPost($event)"
        appScrollReveal
        [revealDelay]="i * 150"
      ></gc-blog-card>
    </div>

    <div class="section-cta" appScrollReveal [revealDelay]="300">
      <gc-button variant="secondary" (click)="viewAllPosts()">
        View All Updates â†’
      </gc-button>
    </div>
  </div>
</section>

<!-- Final CTA Section (Contextual) -->
<section class="cta-section">
  <div class="container">
    <div class="cta-content" appScrollReveal>
      <h2 class="cta-title">Ready to save your gadgets?</h2>
      <p class="cta-subtitle" *ngIf="getDemoState().devices.length > 0">
        You've added {{ getDemoState().devices.length }} gadget{{ getDemoState().devices.length > 1 ? 's' : '' }}.
        Sign up now to keep them safe!
      </p>
      <p class="cta-subtitle" *ngIf="getDemoState().devices.length === 0">
        Join 10,000+ happy users who never lose track of their tech.
      </p>
      <button class="cta-button cta-primary-large" (click)="openSignupWithDemo()">
        <span *ngIf="getDemoState().devices.length > 0">
          Save My {{ getDemoState().devices.length }} Gadget{{ getDemoState().devices.length > 1 ? 's' : '' }} â†’
        </span>
        <span *ngIf="getDemoState().devices.length === 0">
          Get Started Free â†’
        </span>
      </button>
      <p class="cta-note">Free forever for up to 5 gadgets. No credit card required.</p>
    </div>
  </div>
</section>

<!-- Save Progress Sticky Bar (appears after adding gadgets) -->
<app-save-progress-cta (signupClick)="openSignupWithDemo()"></app-save-progress-cta>

<!-- Dialogs -->
<gc-login-dialog
  [isOpen]="isLoginDialogOpen"
  (close)="closeLoginDialog()"
  (switchToSignup)="switchToSignup()"
  (loginSuccess)="onLoginSuccess()"
></gc-login-dialog>

<gc-signup-dialog
  [isOpen]="isSignupDialogOpen"
  [demoDeviceCount]="getDemoState().devices.length"
  (close)="closeSignupDialog()"
  (switchToLogin)="switchToLogin()"
  (signupSuccess)="onSignupSuccess()"
></gc-signup-dialog>
